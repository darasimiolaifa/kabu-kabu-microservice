# Migration `20191104033010-init`

This migration has been generated by Olaifa Oluwadarasimi Ibikunle at 11/4/2019, 3:30:10 AM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Driver" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "drivers_license" text NOT NULL DEFAULT '' ,
  "email" text NOT NULL DEFAULT '' ,
  "firstName" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "lastName" text NOT NULL DEFAULT '' ,
  "phone_number" text NOT NULL DEFAULT '' ,
  "status" text NOT NULL DEFAULT '' ,
  "trips" integer NOT NULL DEFAULT 0 ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Taxi" (
  "capacity" integer NOT NULL DEFAULT 0 ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "manufacturer" text NOT NULL DEFAULT '' ,
  "model" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "year" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Taxi_vehicle_documents" (
  "nodeId" text   REFERENCES "public"."Taxi"("id") ON DELETE CASCADE,
  "position" integer NOT NULL  ,
  "value" text NOT NULL  ,
  PRIMARY KEY ("nodeId","position")
);

CREATE TABLE "public"."Taxi_ownership_documents" (
  "nodeId" text   REFERENCES "public"."Taxi"("id") ON DELETE CASCADE,
  "position" integer NOT NULL  ,
  "value" text NOT NULL  ,
  PRIMARY KEY ("nodeId","position")
);

ALTER TABLE "public"."Driver" ADD COLUMN "taxi" text   REFERENCES "public"."Taxi"("id") ON DELETE SET NULL;

CREATE UNIQUE INDEX "Driver.id" ON "public"."Driver"("id")

CREATE UNIQUE INDEX "Driver.email" ON "public"."Driver"("email")

CREATE UNIQUE INDEX "Taxi.id" ON "public"."Taxi"("id")
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20191104033010-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,34 @@
+datasource db {
+  provider = "postgresql"
+  url      = "postgresql://postgres:holiness86@localhost:5432/kabu_kabu_driver"
+}
+
+generator photon {
+  provider = "photonjs"
+}
+
+model Driver {
+  id    String  @default(cuid()) @id @unique
+  email String  @unique
+  firstName  String
+  lastName  String
+  status  String
+  phone_number  String
+  drivers_license String
+  trips Int @default(0)
+  createdAt DateTime
+  updatedAt DateTime
+}
+
+model Taxi {
+  id  String  @default(cuid())  @id @unique
+  driver  Driver
+  manufacturer  String
+  model String
+  capacity  Int
+  year  String
+  vehicle_documents String[]
+  ownership_documents String[]
+  createdAt DateTime
+  updatedAt DateTime
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20191104033010-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20191104033010-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
